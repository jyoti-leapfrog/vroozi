
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">Ã—</button>
    <h3 id="myModalLabel2">User</h3>
</div>
<div class="modal-body">
    <form class="form-horizontal" name="userForm">
        <div id="emailDiv" class="control-group" ng-class="{error: userForm.email.$dirty && userForm.email.$invalid}">
            <label class="control-label" for="email">Email</label>
            <div class="controls">
                <input type="text" name="email" id="email" placeholder="" ng-model="user.email" ng-change="useEmailAsUsername()" ui-event="{ blur : 'blurEmailCallback()' }" required ng-disabled="isReadOnlyRequest">
                <span class="help-inline" ng-show="userForm.email.$error.required">required</span>
            </div>
        </div>
        <div id="usernameDiv" class="control-group" ng-class="{error: userForm.username.$dirty && userForm.username.$invalid}">
            <label class="control-label" for="username">Username</label>
            <div class="controls">
                <input type="text" name="username" id="username" placeholder="" required ng-model="user.username" ui-event="{ blur : 'blurCallback()' }" ng-disabled="user.emailAsUsername || isReadOnlyRequest">
                <span class="help-inline" ng-show="userForm.username.$error.required">required</span>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label"></label>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" ng-model="user.emailAsUsername" ng-click="useEmailAsUsername();" ng-change="blurCallback()" ng-disabled="isReadOnlyRequest">
                    Use email as username
                </label>
            </div>
        </div>
        <div id="firstNameDiv" class="control-group" ng-class="{error: userForm.firstName.$dirty && userForm.firstName.$invalid}">
            <label class="control-label" for="firstName">First Name</label>
            <div class="controls">
                <input type="text" name="firstName" id="firstName" placeholder="" required ng-model="user.firstName">
                <span class="help-inline" ng-show="userForm.firstName.$error.required">required</span>
            </div>
        </div>
        <div id="lastNameDiv" class="control-group" ng-class="{error: userForm.lastName.$dirty && userForm.lastName.$invalid}">
            <label class="control-label" for="lastName">Last Name</label>
            <div class="controls">
                <input type="text" name="lastName" id="lastName" placeholder="" required ng-model="user.lastName">
                <span class="help-inline" ng-show="userForm.lastName.$error.required">required</span>
            </div>
        </div>
        <div class="control-group" ng-show="showResetLink">
            <div class="controls">
                <a href="" ng-click="resetPasswordEmail(user)" ng-show="showResetLink">Reset Password</a>
            </div>
        </div>
        <div class="control-group" ng-show="user.employeeRole || user.adminRole">
            <label class="control-label" for="defaultApprover">Default Approver</label>
            <div class="controls">
                <select id="defaultApprover" ng-model="user.defaultApproverId" ng-options="option.value as option.name for option in approverUsersOptions"></select>
            </div>
        </div>

        <div class="control-group" ng-show="!(user.approverRole || user.employeeRole || user.adminRole || user.buyerRole || user.supplierRole)">
            <label class="control-label">Select at least one role:
            </label>
        </div>

        <div class="control-group">
            <label class="control-label">Employee</label>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" ng-model="user.employeeRole">
                </label>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">Approver</label>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" ng-model="user.approverRole">
                </label>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">Buyer</label>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" ng-model="user.buyerRole">
                </label>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">Supplier</label>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" ng-model="user.supplierRole">
                </label>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">Admin</label>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" ng-model="user.adminRole">
                </label>
            </div>
        </div>

    </form>
</div>
<div class="modal-footer">
    <button ng-click="closeModal()" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button ng-click="saveUser()" ng-disabled="userForm.$invalid || !(user.approverRole || user.employeeRole || user.adminRole || user.buyerRole || user.supplierRole)" type="button" class="btn btn-primary">Save changes</button>
</div>